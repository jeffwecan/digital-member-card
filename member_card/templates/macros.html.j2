{% macro content_grid(middle_column_size=6) %}
{% set side_column_size = (12 - middle_column_size ) // 2 %}
<div class="mdl-grid">
  <div class="mdl-cell mdl-cell--{{ side_column_size }}-col mdl-cell--hide-tablet mdl-cell--hide-phone"></div>
  <div class="mdl-cell mdl-cell--{{ middle_column_size }}-col mdl-cell--12-col-tablet mdl-cell--12-col-phone">
    {{ caller() }}
  </div>
  <div class="mdl-cell mdl-cell--{{ side_column_size }}-col mdl-cell--hide-tablet mdl-cell--hide-phone"></div>
</div>
{% endmacro %}

{% macro sign_in_button() %}
<a class="google-sign-in-button mdl-js-button" id="google-oauth2-button" name="google oauth2" href="/login/google-oauth2/">
  <img src="{{ url_for('static', filename='btn_google_signin_dark_normal_web@2x.png') }}">
  <!-- <div class="google-icon-wrapper"> -->
  <!-- <img class="google-icon" src="https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg" /> -->
  <!-- </div> -->
  <!-- <p class="btn-text"><b>Sign in with Google</b></p> -->
</a>
{% endmacro %}

{% macro membership_card(
title,
primary_info_text,
secondary_info_text,
aux_info_text,
serial_number,
google_pay_jwt="",
qr_code_b64_png="",
validation_msg="",
above_card_heading="",
show_card_actions_bar=True,
show_qr_code_on_card=False
)
%}
<div class="members-card-wide mdl-card mdl-shadow--2dp">
  <!-- Using (mis-using?) the material design light card title class here as our card "holder" -->
  <!-- save-as-screenshot ID used to indicate what page contents are included in the resulting screenshot -->
  {% if above_card_heading %}
  <h4 class="mdl-typography--text-center">{{ above_card_heading }}</h4>
  {% endif %}
  <div class="mdl-card__title">
    <div class="membership-card">
      <div class="membership-card-inner">
        <!-- This "grid" is what contains and aligns the contents of our HTML-based card -->
        <div class="mdl-grid">
          <!-- START TOP-ROW -->
          <!-- LV crest in the top-left corner: 1/3 column (desktop:4, table:2, phone:1) -->
          <div class="mdl-cell mdl-cell--4-col mdl-cell--2-col-tablet mdl-cell--1-col-phone lv-crest"></div>
          <!-- Card title / identifier in top-right corner 2/3 column (desktop:8, table:6, phone:3) -->
          <div class="mdl-cell mdl-cell--8-col mdl-cell--6-col-tablet mdl-cell--3-col-phone mdl-typography--text-right">
            <h3 class="live-laugh-love">
              {{ title }}
            </h3>
            {% if validation_msg %}
            <h3 class="validation-overlay">
              {{ validation_msg }}
            </h3>
            {% endif %}
          </div>
          <!-- END  TOP-ROW -->

          <!-- START BOTTOM-ROW -->
          <!-- Large bottom-left corner, contents justified to the bottom-left. User-specific details: name, join date, etc. -->
          {% if show_qr_code_on_card %}
          <div class="mdl-cell mdl-cell--8-col mdl-cell--6-col-tablet mdl-cell--3-col-phone mdl-typography--text-left mdl-cell--bottom">
            <div class="live-laugh-love-large houschka">
              {{ primary_info_text }}
            </div>
            <div class="live-laugh-love houschka">
              {{ secondary_info_text }}
            </div>
            <div class="live-laugh-love houschka">
              <small>
                {{ aux_info_text }}
              </small>
            </div>
          </div>

          <!-- Small bottom-left corner. Normally hidden, shows up when saving card as a screenshot -->
          <div class="mdl-cell mdl-cell--4-col mdl-cell--2-col-tablet mdl-cell--1-col-phone qr-code mdl-cell--bottom mdl-typography--text-right">
            <img id="card-qr-code" alt='QR code for card verification' src='data:image/png;base64,{{ qr_code_b64_png | default("")}}' />
          </div>
          <!-- END BOTTOM-ROW -->
          {% else %}
          <div class="mdl-cell mdl-cell--12-col mdl-cell--8-col-tablet mdl-cell--4-col-phone mdl-cell--bottom mdl-typography--text-left">
            <div class="live-laugh-love-large houschka">
              {{ primary_info_text }}
            </div>
            <div class="live-laugh-love houschka">
              {{ secondary_info_text }}
            </div>
            <div class="live-laugh-love houschka">
              <small>
                {{ aux_info_text }}
              </small>
            </div>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>


  <div class="mdl-card__supporting-text">
    <div class="qr-code mdl-typography--text-center">
      <img id="card-qr-code" alt='QR code for card verification' src='data:image/png;base64,{{ qr_code_b64_png | default("")}}' />
    </div>
  </div>

  {% if show_card_actions_bar %}
  <!-- Buttons enable various card-saving actions shown under the main card design -->
  <div class="membership-card-actions mdl-card__actions mdl-card--border mdl-typography--text-center" data-html2canvas-ignore="true">
    {% if not validation_msg %}
    <!-- <button id="save-as-screenshot-menu" class="mdl-button" title="Save as image (.png)">
      <span class="material-icons">screenshot</span>
      Save
    </button>
    <ul class="mdl-menu mdl-menu--top-right mdl-js-menu mdl-js-ripple-effect" data-mdl-for="save-as-screenshot-menu">
      <li id="save-as-screenshot-btn" class="mdl-menu__item">Save card as image (.png)</li>
    </ul> -->
    <a class="save-pass-button save-google-pass-button" href="https://pay.google.com/gp/v/save/{{ google_pay_jwt }}" target="_blank">
      <img class="mdl-js-button mdl-js-ripple-effect" src="{{ url_for('static', filename='save_to_google_pay.svg') }}">
    </a>
    <a class="save-pass-button save-apple-pass-button" href="{{ url_for('passes_apple_pay') }}">
      <img class="mdl-js-button mdl-js-ripple-effect" src="{{ url_for('static', filename='Add_to_Apple_Wallet_rgb_US-UK.svg') }}">
    </a>
    {% else %}
    <a class="mdl-button mdl-js-button mdl-js-ripple-effect" href="{{ url_for('home') }}">
      Back to Home
    </a>
    {% endif %}
  </div>
  {% endif %}
  <!-- <div class="mdl-card__menu">
    <button id="download" data-html2canvas-ignore="true" title="Save as image (.png)"
      class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect mdl-button--fab mdl-button--colored">
      <i class="material-icons">screenshot</i>
    </button>
  </div> -->
</div>

{% endmacro %}

{% macro troubleshooting_list() %}
<span class="mdl-list__item-primary-content">
  <i class="material-icons">email</i>
  <strong>Verify Email Address</strong>
  <br>
  <span class="mdl-list__item-text-body">
    Check that the email address you signed in with matches the email used to purchase your membership.
    <br>
    <br>
    If needed, <a href="{{ url_for('logout') }}">logout</a> now, and then back in, with an account whose email address matches the one used on our LV membership purchase.
  </span>
</span>
<hr>
<span class="mdl-list__item-primary-content">
  <i class="material-icons">store</i>
  <strong>Purchase a Membership</strong>
  <br>
  <span class="mdl-list__item-text-body">
    Or! If you're legit not a member, but would like to be, go grab a membership over at the Los Verdes store!
    <br>
    <br>
    <div class="mdl-card__actions mdl-typography--text-right">
      <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised" href="https://www.losverdesatx.org/lv-store/membership" target="_blank"
         title="Click here to open the membership store in a new tab"><i class="material-icons">storefront</i>&nbsp;Visit Membership Store</a>
    </div>

  </span>
</span>
<hr>
<span class="mdl-list__item-primary-content">
  <i class="material-icons">contact_support</i>
  <strong>Support Available</strong>
  <br>
  <span class="mdl-list__item-text-body">
    Otherwise, please feel free to contact <a href="mailto:los-verdes-tech-support@googlegroups.com">tech
      support</a>, with any relevant details, for assistance.
  </span>
</span>
{% endmacro %}

{% macro help_content() %}
<h4>Help</h4>
<details>
  <summary>
    <h6>What if I am unable to access my card?</h6>
  </summary>
  <div>
    {{ troubleshooting_list() }}
  </div>
</details>
<h4>About</h4>
This website provides access to a digital membership card for any current members of the <a href="https://losverdesatx.org" target="_blank">Los Verdes</a> futbol supporters group.
<h5>Website Policies</h5>
This site's privacy policy can be view here: <a href="{{ url_for('privacy_policy') }}">Privacy Policy</a>
<hr>
{% endmacro %}


{% macro snackbar() %}
<div id="toastSnackbar" class="mdl-js-snackbar mdl-snackbar">
  <div id="toastSnackbarContent" class="mdl-snackbar__text"></div>
  <button class="mdl-snackbar__action" type="button"></button>
</div>
{% endmacro %}
